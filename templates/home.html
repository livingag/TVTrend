{% extends "base.html" %}

{% block head %}
<title>TVTrend</title>
{% endblock %}

{% block content %}
<div class="ui container">
    <h1>TVTrend</h1>
    <p>Visualise trends of user ratings for TV shows</p>
    {% with messages = get_flashed_messages() %}
    {% if messages %}
        {% for message in messages %}
        <div class="ui negative message">
            <i class="close icon"></i>
            <div class="header">
                Plotting failed:
            </div>
            <p>{{ message }}</p>
        </div>
        {% endfor %}
    {% endif %}
    {% endwith %}
    <form class="ui form" action="{{ url_for('search') }}" method="POST">
        <div class="inline field">
            <div id="searchBar" class="ui left icon action input" style="width:50%; min-width:40rem;">
                <i class="search icon"></i>
                <input type="text" placeholder="Show Name..." name="showname" style="width:70%">
                <select class="ui dropdown" name="source" style="width:7rem;">
                    <option selected="" value="imdb">IMDb</option>
                    <option value="trakt">Trakt.tv</option>
                </select>
                <button id="searchButton" class="ui button green" type="submit">Search</button>
            </div>
        </div>
    </form>
    <p>Try <a href="{{ url_for('plot_show',imdbId='tt0411008',source='imdb') }}">Lost</a>, <a href="{{ url_for('plot_show',imdbId='tt0903747',source='imdb') }}">Breaking Bad</a>, or <a href="{{ url_for('plot_show',imdbId='tt0944947',source='imdb') }}">Game of Thrones</a></p>
    <p><small>Source on <a href="http://github.com/livingag/TVTrend">GitHub</a></small></p>
</div>
<script>
    document.getElementById('searchButton').addEventListener('click', function() {
        var d = document.getElementById('searchBar');
        d.className += " loading";
    });
    $(document).ready(function (){
        $('.message .close').on('click', function () {
            $(this).closest('.message').transition('fade');
        });
    })
</script>
{% endblock %}